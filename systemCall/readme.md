1. 개요
-시스템 콜은 다음과 같은 과정을 거쳐 동작한다. 
시스템 함수를 요청하면 syscall() 함수를 호출한다 syscall함수는 매크로 인라인함수로 정의되어있다. 
syscall 함수에 시스템콜 번호와 do_ 로 정의된 함수명과 인자의 개수를 알려주면 해당 인라인 함수로 동작하게 된다. 
인라인 함수에서는 레지스터들에 각 시스템 함수에서 받은 인자들을 입력해준뒤 시스템 콜 번호를 스택에 넣어준다. 
이후 30번 인터럽트를 발생시킨다. 이때 30번 인터럽트를 받는 시스템콜 핸들러로 이동하여 다음의 동작을 수행한다. 
이전에 스택과 레지스터에 넣어준 값들은 intr_frame이라는 구조체에 저장되어있다. 
이 구조체에 포함된 스택에서 시스템 콜 번호를 가져온뒤 해당 시스템 콜이 가지는 시스템 콜 테이블에서 인자의 개수를 알아낸다. 
이후 인자의 개수를 바탕으로 레지스터들에서 인자들을 가져와 arg 배열에 넣어준다.
이후 switch문에서 테이블에 등록된 함수이름에 즉, do_ 로 정의된 함수에 arg에 입력 되어있는 인자를 전달하여 호출한다. 
do_ 로정의된 함수들에서는 해당 동작을 한뒤 리턴을 한다. 
각 함수들의 리턴값은 ret이라는 변수에 저장된후 시스템콜을 받아왔던 스택의 위치에 다시 입력해준다. 이후 시스템콜 핸들러가 종료된다. 
이후 30번 인터럽트를 발생한뒤의 인라인 함수로 복귀하면 스택에 저장되어 있는 리턴값을 가져온뒤 인라인 함수의 리턴값으로 전달해준다. 
받은 리턴값은 시스템 함수를 요청한 코드로 전달되며 시스템 콜 호출과정이 끝나게 된다.
-버디메모리 할당방식은 한 페이지를 절반의 크키로 반복하여 나눠 가며 요청한 메모리 크기와 최적의 크기를 가진 블록을 할당하여 사용하는 방식이다.
할당하는 메모리는 블록이라는 구조로 사용되어진다. 이때 무한정 크기를 나누면 안되므로 최소 크기는 64비트 최대 크기는 한 페이지로 정해준다. 
때문에 한 메모리 할당 크기의 즉, 블록의 최소값은 64byte 이고 최대값은 한 페이지 크기로 4kb이다. 
할당 되는 블록의 크기에 따라 해당 블록의 시작위치가 한정되어 있므로 해당 블록이 위치할수 있는지 공간을 찾기위해 모든 메모리의 여유 공간을 찾지 않아도 된다.
예를 들어 n이 2의 승수일 때 할당 되는 블록의 크기가 한 페이지의 1/n 크기 라면 n개의 위치에 해당 블록을 할당할수 있다.
-메모리를 해제하는 방식은 전체 블록을 검사해 해제하려는 위치의 시작주소를 가진 블록을 찾은뒤 공간을 해제하면 되므로 전체 메모리를 찾을 필요가 없다.

2. 상세 설계
(1) 시스템콜 추가: 시스템 콜 테이블에 do_malloc과 do_free함수에 대한 정보를 등록해준다. 
시스템 콜을 위한 syscall 매크로 함수는 인자의 값들 전달하기 위해 각각 ebx, ecx, edx에 최대 3개의 인자를 저장하였다. 
인터럽트 종료후 시스템 콜이 저장되어있던 스택의 위치에서 pop을 통해 리턴 값을 받아온다. 이값을 syscall 함수의 리턴값으로 전달한다.
syscall_handler 에서는 인자의 값을 각각 ebx, ecx, edx에 최대 3개 레지스터에서 받아온뒤 테이블에 등록된 함수에 전달한다.
이후 핸들러 종료시 리턴값을 스택의 시스템콜의 위치에 넣어준다.
(2) malloc, do_malloc() 구현: malloc 함수는 인자가 1개 이므로 syscall1() 매크로 함수를 사용한다. 
이후 핸들러를 통해 do_malloc 함수를 호출하면 size로 받은 할당할 메모리의 크기에 적절한 블록크기를 malloc.c에 정의 되어있는 get_ceiling을 통해 알아온뒤 
block_checking을 통해 할당 가능한 시작 메모리 주소를 받아와 블록 크기만큼을 할당함으로써 버디메모리 할당 방식을 구현하였다. 
block_checking 함수에서는 최적 크기의 블록사이즈를 전달받으면 사용한 페이지들의 시작 주소와 함께 block_getaddr 함수에 전달하며
리턴값으로 할당 가능한 주소를 do_malloc에 전달한다. 
이과정을 반복하여 사용한 페이지중 할당 가능한 페이지가 없다면 새로운 페이지를 할당 받은뒤에
새 페이지의 주소를 do_malloc에 전달한다. block_getaddr 에서는 인자로 받은 페이지 시작주소를 통해 
해당 페이지를 사용중인 블록들이 어느 위치를 사용중인지 한페이지의 64byte 마다의 상태를 알려주는 bool형 배열에 저장한다. 
이후 전달받은 블록사이즈를 페이지에서 할당가능한 위치의 해당 크기 만큼을 사용중인지 배열에서 검사해서 가능하다면 
해당 위치의 시작 주소를 block_checking에 전달한다. 이때 가능한 주소가 없다면 NULL을 리턴하여 다른 페이지를 검사할수 있도록 한다. 
(3) free, do_free() 구현: free 함수는 인자가 1개 이므로 syscall1() 매크로 함수를 사용한다.
이후 핸들러를 통해 do_free 함수를 호출한다. do_free에서는 현재 인자로 받은 주소를 시작주소로 가지는 블록을 해제하는 기능을 한다.
그렇기 때문에 전체 블록들에서 해당 조건을 가진 블록을 찾는다. 
이때 해당하는 블록이 없다면 종료하게 된다. 이후 해당 블록을 포함하는 페이지에 할당되어있는 블록의 개수를 조사한다.
만약 해당 페이지에 블록이 1개라면 그 블록을 해제한뒤에 그페이지는 사용중이 아니므로 해당 페이지에 대한 현재 사용정보도 바꿔준뒤
페이지 사용 개수를 줄여준다. 그 페이지에 복수의 블록이 할당되어있다면, 해제하길 요청한 블록의 정보를 가진 리스트를 지워준다음 
전체 사용 블록 개수의 수를 줄여준다.   
